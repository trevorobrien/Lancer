!function(){function t(){var t=document.createElement("script");t.setAttribute("src","//widget.fitanalytics.com/widget.js"),t.setAttribute("type","text/javascript"),document.body.appendChild(t);var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href","//integrations.fitanalytics.com/shop/calvinklein/fitanalytics.css"),document.head.appendChild(i),e.initialize(),window._fitAnalytics=window._upcload=function(){},window._fitAnalytics.shop=e}if(!window._fitAnalytics){var e={prefix:"calvinklein-",rawSerials:[],serials:[],products:{},isMobile:/iphone|android|iemobile|blackberry/i.test(window.navigator.userAgent)&&("mozInnerScreenX"in window?"onorientationchange"in window&&"ontouchstart"in window:"ontouchstart"in window),el:{buttonContainer:"#product #sizeContainer .sizeTitle",productId:'.productswatches li[class*="active"] a[data-cloudzoom]',colorSwatch:"#product .productswatches a[data-cloudzoom]",currentColorButton:'#product .productswatches li[class*="active"] a[data-cloudzoom]',sizes:"#product #sizes li",addToCart:"#product #add2CartBtn",sizeChart:"#product .sizeGuideTrigger",thumbnail:".product_main_image > #zoom1"},hideSizeChart:!1,initialize:function(){var t=setInterval(function(){e.isLoaded()?(clearInterval(t),e.onLoaded()):document.querySelector(".look")&&clearInterval(t)},100)},isLoaded:function(){return"function"==typeof window.FitAnalyticsWidget&&"function"==typeof window.$&&window.$("#product").length},onLoaded:function(){e.$=window.$,e.isDataAvailable()&&e.loadWidget()},isDataAvailable:function(){var t=e.getCurrentSerial(),i=(e.getSerials(),e.getLanguage(),e.getCountry(),e.getSizes());e.getUserId(),e.getThumbnail();return!(!t||!i)},getRawSerials:function(){return e.$(e.el.colorSwatch).toArray().map(function(t){var i=e.$(t);return e.cloudzoomToRawSerial(i.data("cloudzoom")||"")})},getSerials:function(){var t=e.getRawSerials();return!!t.length&&t.map(function(t){return e.prefix+t})},getCurrentRawSerial:function(){var t=e.$(e.el.productId),i=t.data("cloudzoom");return e.cloudzoomToRawSerial(i)},getCurrentSerial:function(){var t=e.getCurrentRawSerial();return t&&e.prefix+t},cloudzoomToRawSerial:function(t){var i=t.match(/image[:'"]+([^\s'"]+)/).pop()||"";return e.urlToRawSerial(i)},urlToRawSerial:function(t){return(t.split("/").pop().match(/(\d+_\d+)/).pop()||"").replace(/_/g,"-")},getSizes:function(){var t=[];return t.dic={},t.state={},$(e.el.sizes).toArray().forEach(function(n){var a=e.$(n),o=a.find("span[data-escaped-size]"),r=o&&i(o.text()).toUpperCase(),s=!a.hasClass("disabled")||a.hasClass("available");r&&(t.push(r),t.state[r]=s,s&&(t.dic[r]=a))}),t},getLanguage:function(){var t=window.hm&&window.hm.data||{},e=t.locale||document.documentElement.getAttribute("lang");return"string"==typeof e?e.substring(0,2).toLowerCase():null},getCountry:function(){return"US"},getThumbnail:function(){var t=e.$(e.el.thumbnail);return t.length?t.attr("src"):""},getUserId:function(){return window.utag_data&&(window.utag_data.customer_id||window.utag_data["cp.utag_main_c_id"])||""},getSizeChart:function(){return e.$(e.el.sizeChart)},getContext:function(t){return e.products[t]},setContext:function(t,i){return e.products[t]=e.$.extend(e.products[t],i)},loadWidget:function(){e.widget=new window.FitAnalyticsWidget({language:e.getLanguage(),shopCountry:e.getCountry(),userId:e.getUserId(),recommend:function(t,i,n){e.recommend(t,i,n)},cart:function(t,i,n){e.recommend(t,i,n);var a=e.getSizes().dic[i];a.length&&(a.hasClass("selected")||a.trigger("click"),setTimeout(function(){e.$(e.el.addToCart).trigger("click")},300))},close:function(t,i,n){e.recommend(t,i,n)},open:function(){Object.keys(e.products).forEach(function(t){(e.products[t]||{}).recommendation=null})}}),e.widget.requestProducts(e.getSerials(),function(t){t.forEach(function(t){e.setContext(t.garment.serial,{isSupported:!0})}),e.checkForProductChange()})},recommend:function(t,i,n){e.widget.isABTestEnabled()||(e.addRecommendationToContext(t,i,n),e.button.setText(i,n))},addRecommendationToContext:function(t,i,n){e.setContext(t,{recommendation:{size:i,details:n}})},checkForProductChange:function(){!function(){var t;setInterval(function(){var i=e.getCurrentSerial();t!==i&&(t=i,e.onProductChange())},200)}()},onProductChange:function(){e.reconfigure()},reconfigure:function(){var t=e.getCurrentSerial();e.getContext(t)?e.widget.reconfigure({productId:t},e.onProductLoaded):e.onProductLoaded()},onProductLoaded:function(){if(e.widget.isABTestEnabled())return void e.ABTest.install();var t=e.getContext(e.getCurrentSerial());t?e.installButton(t):(e.button.hide(),e.getSizeChart().show())},installButton:function(t){e.button.install(),t.recommendation?e.button.setText(t.recommendation.size,t.recommendation.details):(t.recommendation=!0,e.widget.getRecommendation({productId:e.getCurrentSerial(),thumb:e.getThumbnail(),manufacturedSizes:e.getSizes().state})),e.hideSizeChart&&e.getSizeChart().hide(),e.button.show()},button:{text:{de:["Finde meine Größe","Deine Größe ist"],en:["Find my size","We recommend size "],es:["Encontrar mi talla","Tu talla es"],it:["Trova la mia taglia","La tua taglia è"],nl:["Vind mijn maat","Jouw maat is"],fi:["Minun kokoni","Sinun kokosi on"],fr:["Trouver ma taille","Votre taille est"],ro:["Găsește-mi mărimea","Mărimea dvs. este"],ru:["Мой размер","Ваш размер"],sv:["Min storlek","Din storlek är"],tr:["BEDENİMİ BUL","Sizin bedeniniz"],pl:["Znajdź mój rozmiar","Twój rozmiar to"],pt:["Descobrir Meu Tamanho","Seu tamanho é"]},getText:function(t,i){var n=this.isValidSize(t,i),a=this.text[e.getLanguage()]||this.text.en;return n?a[1]+" <span>"+t+"</span>":a[0]},setText:function(t,e){var i=this.isValidSize(t,e),n=this.getText(t,e);this.find().find(".fitanalytics__button-text").html(n).attr({title:i?null:n}).css({cursor:i?"default":"pointer","text-decoration":i?"none":"underline"}).off().on("click",i?null:this.onClick),this.find().find(".fitanalytics__button-new").css({display:i?"none":"inline-block"}),this.find().find(".fitanalytics__button-edit").css({display:i?"inline-block":"none"}).off().on("click",i?this.onClick:null)},isValidSize:function(t,i){return!("string"!=typeof t||!e.getSizes().dic[t]||i.outOfStock||i.outOfRange)},buildButton:function(){var t=this.getText();return e.$('<div id="fitanalytics" class="fitanalytics__button"></div>').append(e.$("<span></span>").attr({title:t,class:"fitanalytics__button-text"}).html(t)).append(e.$("<span>EDIT</span>").attr({class:"fitanalytics__button-edit"}).css({display:"none"}))},isInitialized:!1,show:function(){this.find().show()},hide:function(){this.find().hide()},find:function(){return e.$("#fitanalytics")},onClick:function(){return e.widget.open({productId:e.getCurrentSerial(),thumb:e.getThumbnail(),manufacturedSizes:e.getSizes().state}),!1},install:function(){if(!this.find().length){var t=this.buildButton();e.$(e.el.buttonContainer).append(t)}}},ABTest:{$sizeAdvisor:null,$sizeChart:null,$originalSizeChart:null,install:function(){var t=e.widget.getUserABTestFunnel(),i=e.getCurrentSerial(),n=e.getContext(i);if(!e.$(".fitanalytics__button__ABTest").length){this.$originalSizeChart=e.getSizeChart(),this.$sizeChart=this.$originalSizeChart.clone().addClass("fitanalytics__button__ABTest").on("click.fitA",function(){e.getSizeChart().first().click(),e.widget.meterABTestSizeChartOpen(t)});this.$sizeAdvisor=$("<div></div>").text("Find your size").addClass("fitanalytics__button__ABTest").on("click",e.button.onClick),this.$originalSizeChart.after(this.$sizeChart),e.$(e.el.buttonContainer).append(this.$sizeAdvisor)}n?(this.$originalSizeChart.hide(),this.setup(t)):(e.$(".fitanalytics__button__ABTest").hide(),this.$originalSizeChart.show())},setup:function(t){this.$sizeChart.show(),this.$sizeAdvisor["sizeAdvisor"===t?"show":"hide"]()}}},i=function(t){return"string"!=typeof t?"":t.replace(/^["'\s\uFEFF\xA0]+|[\s\uFEFF\xA0"']+$/g,"")};"interactive"===document.readyState||"complete"===document.readyState?t():document.addEventListener("DOMContentLoaded",function(){t()})}}();